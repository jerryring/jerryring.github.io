---
layout:     post
title:      UML类图介绍
subtitle:   UML
date:       2018-04-08
author:     Jr
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - UML
    - class diagram
    - 类图
---

>UML class diagram
# UML

## 简介

UML既统一建模语言<Unified Modeling Language>，是一种为面向对象开发系统的产品进行说明、可视化、和编制文档的标准语言；作为软件设计人员，可以更专注于建立产品的模型和结构，而不是选用什么程序语言和算法实现；

## 核心

UML核心是图表，大致分为两类。

* 结构图
* 行为图

结构图包括：类图，对象图，构件图，部署图，包图

行为图包括：活动图，状态机图，顺序图，通信图，用例图，时序图

这里重点说说UML 类图<Class Diagram>

![UML2.5 Diagram](http://www.uml-diagrams.org/uml-25-diagrams.png)

# UML类图

UML类图用于描述类与类之间的关系，其关系主要包含以下几个：

* 泛化关系

* 实现关系

* 依赖关系

* 关联关系

* 聚合关系

* 组合关系

![1554707903675](img/post-img/typora-user-images/1554707903675.png)

## 泛化关系

类的继承结构在UML中表现为泛化和实现，其中

泛化<Generalization>，表示继承关系，继承关系为 is-a的关系；两个对象之间如果可以用 is-a 来表示，就是继承关系，泛化关系用一条带空心三角箭头的实线表示；如下图表示（B继承自A）；

![1554708286989](img/post-img/typora-user-images/1554708286989.png)

例如，类Dog继承自抽象类Animal，UML表示为：

![1554708253130](img/post-img/typora-user-images/1554708253130.png)

在Java编程中，使用extends关键字体现。

## 实现关系

类的继承结构中在UML中的另一种体现表示为实现，实现<Realization>，指的是一个class类实现interface接口（可以是多个）的功能；在Java中此类关系通过关键字implements明确标识。用带空心三角形箭头的虚线表示；如下图表示（B实现A）;

![1554708886233](img/post-img/typora-user-images/1554708886233.png)

例如Hashmap中的AbstractMap实现了Map接口：

![1554709234935](img/post-img/typora-user-images/1554709234935.png)

## 依赖关系

依赖<Dependency>是一种使用关系，特定事物的改变有可能会影响到使用该事物的其他事物，在需要表示一个事物使用另一个事物时使用依赖关系。大多数情况下，依赖关系体现在某个类的方法使用另一个类的对象作为参数。在UML中，依赖关系用带箭头的虚线表示，由依赖的一方指向被依赖的一方；如下图所示（A依赖于B）;

![1554709662327](img/post-img/typora-user-images/1554709662327.png)

```java
public class Driver  
{  
    public void drive(Car car)  
    {  
        car.move();  
    }
}  
public class Car  
{  
    public void move()  
    {  
        ......  
    }
}  
```

上述代码UML表示为：

![1554709582280](img/post-img/typora-user-images/1554709582280.png)

依赖关系主要体现在如下三种情况：

1. A类是B类中的（某种方法的）局部变量；
2. A类是B类方法当中的一个参数；
3. A类向B类发送消息，从而影响B类发生变化；

## 关联关系

关联<Association>是一种类与类之间的连接关系，它使得一个类知道另一个类的属性和方法，某个对象会长期的持有另一个对象的引用，关联的两个对象彼此间没有任何强制性的约束，只要二者同意，可以随时解除关系或是进行关联，它们在生命期问题上没有任何约定。被关联的对象还可以再被别的对象关联，所以关联是可以共享的。 在代码层面上，被关联类以类属性的形式出现在关联类中，也可能是关联类引用了一个类型为被关联类的全局变量。在类图中，关联关系呈现为有向实线。关联关系有方向之分，默认情况下为双向的，也可刻意的标记为单项。

> 0..1 表示可以有0个或者1个实例
>
> 0..* 表示对实例的数目没有限制
>
> 1..1 表示只能有一个实例
>
> 1..* 表示至少有一个实例
>
> m..n表示另一个类的一个对象与最少m、最多n个该类对象有关系 (m<=n)

* 双向关联

  > 关联总是被假定为双向的; 使用双箭头或者不使用用箭头表示双向关联；
  >
  > ~~~java
  > public class Customer  
  > {  
  >     private Product[] products;  
  > }  
  > public class Product  
  > {  
  >     private Customer customer;  
  > }  
  > ~~~
  >
  > ![1554711316621](img/post-img/typora-user-images/1554711316621.png)

* 单向关联

  > 类的关联关系也可以是单向的，单向关联用带箭头的实线表示；
  >
  > ~~~java
  > public class Customer  
  > {  
  >     private Address address;  
  > }  
  >   
  > public class Address  
  > {  
  >     ……  
  > }  
  > ~~~
  >
  > ![1554716460571](img/post-img/typora-user-images/1554716460571.png)

## 聚合关系

聚合<Aggregation>是关联关系的特例，是强的关联关系，聚合是整个与个体的关系，即has-a关系，此时整体和部分是可以分离的，他们具有各自的生命周期，部分可以属于多个对象，也可以被多个对象共享；比如计算机和CPU，公司与员工的关系；在代码层面聚合与关联是一致的，只能从语义上来区分。

聚合关系也是使用实例变量来实现的，在java语法上区分不出关联和聚合，关联关系中类出于一个层次，而聚合则明显的在两个不同的层次。

聚合关系用一条带空心菱形箭头的直线表示，如下图表示A聚合到B上，或者说B由A组成；

![1554779472091](img/post-img/typora-user-images/1554779472091.png)

> ~~~java
> public class Teacher  
> {
>     private Car car; 
>     private int no;
>     private String address;
>     private Eye eye;
> }  
> 
> public class Car
> { 
>     ...
> }
> public class Eye
> {
>     ...
> }
> ~~~
>
> ![1554779959825](img/post-img/typora-user-images/1554779959825.png)

## 组合关系

组合<Composition>也是关联关系的一种特例，体现的是一种contain-a关系，比聚合更强，是一种强聚合关系。它同样体现整体与部分的关系，但此时整体与部分是不可分的，整体生命周期的结束也意味着部分生命周期的结束，反之亦然。如大脑和人类。

体现在代码层面与关联时一致的，只能从语义来区分。

组合与聚合几乎完全相同，唯一区别就是对于组合，“部分”不同脱离“整体”单独存在，其生命周期应该是一致的。

组合关系用带实心菱形的直线表示。如下图表示A组合到B，且A不能离开B单独存在。

![1554779865897](img/post-img/typora-user-images/1554779865897.png)

![1554780075762](img/post-img/typora-user-images/1554780075762.png)

# 总结

组合>聚合>关联>依赖